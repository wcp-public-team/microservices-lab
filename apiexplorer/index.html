


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.4.0">
    
    
      
        <title>Using the API Explorer - Microservices Lab</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.fe0cca5b.min.css">
      
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#using-the-api-explorer" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href=".." title="Microservices Lab" class="md-header-nav__button md-logo" aria-label="Microservices Lab">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Microservices Lab
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Using the API Explorer
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Microservices Lab" class="md-nav__button md-logo" aria-label="Microservices Lab">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Microservices Lab
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../signup/" title="Sign up for IBM Cloud" class="md-nav__link">
      Sign up for IBM Cloud
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../explore/" title="Explore IBM Cloud" class="md-nav__link">
      Explore IBM Cloud
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../createapp/" title="Create your first application" class="md-nav__link">
      Create your first application
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../addfunction1/" title="Add logic to your application" class="md-nav__link">
      Add logic to your application
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../addfunction2/" title="Add another function" class="md-nav__link">
      Add another function
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
    <a href="./" title="Using the API Explorer" class="md-nav__link md-nav__link--active">
      Using the API Explorer
    </a>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../summary/" title="Summary" class="md-nav__link">
      Summary
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../resources/" title="Additional Learning Resources" class="md-nav__link">
      Additional Learning Resources
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  
                
                
                <h1 id="using-the-api-explorer">Using the API Explorer</h1>
<p>Your microservice is essentially a REST API that has two functions defined so far:</p>
<pre><code>GET /customers
GET /plans
</code></pre>

<p>Most REST APIs have an OpenAPI (a.k.a. Swagger) definition and an API Explorer that consumers of the API can use to test their applications.  Well, the initial code that was used to populate your git repo also has a definition file and the API explorer code built into it!</p>
<p>To test it out, go back to your browser where you tested your code in the last section and change the end of the URL from <code>/plans</code> to <code>/explorer</code>.  It may take a few seconds to load, and when it does you should see something like this:</p>
<p><img alt="API Explorer" src="../images/SwaggerUIDefault.png" /></p>
<p>But where are the two API operations we added in the last two sections?  The reason they are not there yet is because we didn't update the file the contains the API definition.  That's the goal of this section of the lab.</p>
<p>Go back to your toolchain and open the <code>Eclipse Orion Web IDE</code>.</p>
<p>Expand the <code>public</code> folder and click on <code>swagger.yaml</code>.  This is the file that drives the Swagger UI code behind the API Explorer.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><em>The content of the <code>swagger.yaml</code> file is sensitive to indents.  It is very important to make sure your cursor is on column 1 of the line where you want to paste code, and also very important to make sure that when you select the code from this document you start with column 1 of the first line you select.  It is a common mistake to accidentally start selecting text in column 2, especially when that column contains a space!</em></p>
</div>
<p>Copy the code below and paste it right above line 26 that has <code>definitions:</code></p>
<pre><code>  /customers:
    get:
      operationId: getCustomers
      responses:
        200:
          description: &quot;Get all of the customers&quot;
          schema:
            $ref: &quot;#/definitions/CustomersResponse&quot;
  /customers/{customerId}:
    get:
      description: &quot;Returns a single customer&quot;
      operationId: &quot;getByCustomerId&quot;
      parameters:
      - name: &quot;customerId&quot;
        in: &quot;path&quot;
        description: &quot;ID of the customer to return&quot;
        required: true
        type: &quot;string&quot;
      responses:
        200:
          description: &quot;successful operation&quot;
          schema:
            $ref: &quot;#/definitions/Customer&quot;
        400:
          description: &quot;Invalid ID supplied&quot;
        404:
          description: &quot;Customer not found&quot;
  /plans:
    get:
      operationId: getPlans
      responses:
        200:
          description: &quot;Get all of the plans&quot;
          schema:
            $ref: &quot;#/definitions/PlansResponse&quot;
  /plans/{planId}:
    get:
      description: &quot;Returns a single plan&quot;
      operationId: &quot;getByPlanId&quot;
      parameters:
      - name: &quot;planId&quot;
        in: &quot;path&quot;
        description: &quot;ID of the plan to return&quot;
        required: true
        type: &quot;string&quot;
      responses:
        200:
          description: &quot;successful operation&quot;
          schema:
            $ref: &quot;#/definitions/Plan&quot;
        400:
          description: &quot;Invalid ID supplied&quot;
        404:
          description: &quot;Plan not found&quot;
</code></pre>

<p>Those lines add entries for the new routes we added, <code>/customers</code> and <code>/plans</code>.  They also include entries for two other paths that would commonly be part of any API.  We won't implement them in this lab.</p>
<p>Next, copy the code below and paste it at the bottom of the file, at the end of the definitions section.  You may need to add a blank line at the end of the file.  Make sure your cursor is on the first column of the last line of the file.  You may need to backspace to get to column 1.  </p>
<pre><code>  Customer:
    type: &quot;object&quot;
    properties:
      id:
        type: &quot;string&quot;
      name:
        type: &quot;string&quot;
      plan:
        type: &quot;string&quot;
  Plan:
    type: &quot;object&quot;
    properties:
      id:
        type: &quot;string&quot;
      name:
        type: &quot;string&quot;
      description:
        type: &quot;string&quot;
      premium:
        type: &quot;number&quot;      
  CustomersResponse:
    type: &quot;object&quot;
    properties:
      customers:
        type: &quot;array&quot;
        items:
          $ref: &quot;#/definitions/Customer&quot;
  PlansResponse:
    type: &quot;object&quot;
    properties:
      plans:
        type: &quot;array&quot;
        items:
          $ref: &quot;#/definitions/Plan&quot;
</code></pre>

<p>Okay, the <code>swagger.yaml</code> file has everything you need to add your new operations to the API Explorer.  The final version of the file should look like this:</p>
<pre><code>swagger: '2.0'

info:
  version: &quot;0.0.1&quot;
  title: ExpressjsMicroserviceCNSOK API

consumes:
  - text/plain

produces:
  - application/json

paths:
  /health:
    get:
      operationId: get
      description: Get health status of ExpressjsMicroserviceCNSOK
      responses:
        200:
          description: &quot;Health check response&quot;
          schema:
            $ref: &quot;#/definitions/healthResponse&quot;
          examples:
            application/json: { &quot;status&quot;: &quot;UP&quot;}
  /customers:
    get:
      operationId: getCustomers
      responses:
        200:
          description: &quot;Get all of the customers&quot;
          schema:
            $ref: &quot;#/definitions/CustomersResponse&quot;
  /customers/{customerId}:
    get:
      description: &quot;Returns a single customer&quot;
      operationId: &quot;getByCustomerId&quot;
      parameters:
      - name: &quot;customerId&quot;
        in: &quot;path&quot;
        description: &quot;ID of the customer to return&quot;
        required: true
        type: &quot;string&quot;
      responses:
        200:
          description: &quot;successful operation&quot;
          schema:
            $ref: &quot;#/definitions/Customer&quot;
        400:
          description: &quot;Invalid ID supplied&quot;
        404:
          description: &quot;Customer not found&quot;
  /plans:
    get:
      operationId: getPlans
      responses:
        200:
          description: &quot;Get all of the plans&quot;
          schema:
            $ref: &quot;#/definitions/PlansResponse&quot;
  /plans/{planId}:
    get:
      description: &quot;Returns a single plan&quot;
      operationId: &quot;getByPlanId&quot;
      parameters:
      - name: &quot;planId&quot;
        in: &quot;path&quot;
        description: &quot;ID of the plan to return&quot;
        required: true
        type: &quot;string&quot;
      responses:
        200:
          description: &quot;successful operation&quot;
          schema:
            $ref: &quot;#/definitions/Plan&quot;
        400:
          description: &quot;Invalid ID supplied&quot;
        404:
          description: &quot;Plan not found&quot;

definitions:
  healthResponse:
    type: &quot;object&quot;
    properties:
      status:
        type: &quot;string&quot;
  Customer:
    type: &quot;object&quot;
    properties:
      id:
        type: &quot;string&quot;
      name:
        type: &quot;string&quot;
      plan:
        type: &quot;string&quot;
  Plan:
    type: &quot;object&quot;
    properties:
      id:
        type: &quot;string&quot;
      name:
        type: &quot;string&quot;
      description:
        type: &quot;string&quot;
      premium:
        type: &quot;number&quot;      
  CustomersResponse:
    type: &quot;object&quot;
    properties:
      customers:
        type: &quot;array&quot;
        items:
          $ref: &quot;#/definitions/Customer&quot;
  PlansResponse:
    type: &quot;object&quot;
    properties:
      plans:
        type: &quot;array&quot;
        items:
          $ref: &quot;#/definitions/Plan&quot;
</code></pre>

<p>Commit and push your code.</p>
<p>Go back to the toolchain and view the Deploy stage of the Delivery Pipeline.  When the Deploy stage passes you can go back to the browser tab that has the Swagger UI in it and refresh the page.  If you closed that tab the URL is:</p>
<p><code>http://&lt;your-app-route&gt;.mybluemix.net/explorer</code></p>
<p>The API explorer should now show your new operations:</p>
<p><img alt="API Explorer" src="../images/SwaggerUIUpdated.png" /></p>
<p>Click the blue <code>GET</code> button next to <code>/customers</code>.</p>
<p>Click <code>Try it out</code>.  You should get back some JSON:</p>
<p><img alt="" src="../images/GetCustomersExplorer.png" /></p>
<p>Scroll down further and click the blue <code>GET</code> button next to <code>/plans</code>.  Click <code>Try it out</code>.</p>
<p><img alt="" src="../images/GetPlansExplorer.png" /></p>
<p>Now that you have added these operations to the API Explorer consumers of your microservice can use the API explorer to test it out as they use it in their own applications!</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../addfunction2/" title="Add another function" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Add another function
              </div>
            </div>
          </a>
        
        
          <a href="../summary/" title="Summary" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Summary
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.d710d30a.min.js"></script>
      <script src="../assets/javascripts/bundle.b39636ac.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.a68abb33.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>